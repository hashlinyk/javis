# 陈旧知识更新规则

本文档定义了在特定架构变更时，必须同步更新的陈旧知识和文档引用。

## 自动更新触发条件

### 必须触发的变更

当以下类型的变更发生时，必须自动检查并更新所有相关文档：

| 变更类型 | 检查范围 | 更新动作 |
|---------|---------|---------|
| **目录重命名/移动** | 全部 .md 文件 | 更新所有路径引用 |
| **文件删除** | 全部 .md 文件 | 删除或替换相关引用 |
| **架构调整** | JARVIS.md, session_history.md | 同步架构描述，添加历史记录 |
| **Git 配置变更** | javis_projects/README.md, JARVIS.md | 更新版本管理说明 |
| **新增工具/脚本** | tools/目录下的 README | 添加工具说明 |

### 检查清单

进行上述变更时，必须检查：

1. **F:\workspace\** 下的所有 .md 文件
   - CLAUDE.md
   - JARVIS.md
   - memory/**/*.md
   - skills/**/*.md
   - tools/**/*.md

2. **F:\javis_projects\** 下的所有 .md 文件
   - README.md
   - references/**/*.md (如果存在)

3. **配置文件**
   - .gitignore
   - .gitmodules
   - 脚本中的硬编码路径

## 常见更新场景

### 场景 1: 移动 memory/ 子目录

**触发**: 将 memory/ 下的某个子目录移动到新位置

**检查项**:
- `memory/knowledge_base/index.md` - 更新索引
- `memory/knowledge_base/tags.md` - 更新标签映射
- `memory/README.md` - 更新目录结构描述
- 所有引用该路径的 .md 文件

### 场景 2: 删除目录/文件

**触发**: 删除某个不再需要的目录或文件

**检查项**:
- 所有 .md 文件中的路径引用
- README.md 中的目录结构
- JARVIS.md 中的架构描述
- 可能的硬编码路径（如 Python 脚本）

### 场景 3: 架构重大调整

**触发**: 修改 JARVIS.md 中的核心架构设计

**检查项**:
- `memory/session_history.md` - 添加新的会话记录，说明架构变更
- `JARVIS.md` - 确保所有描述与实际一致
- `CLAUDE.md` - 检查会话启动规则是否需要更新
- 所有相关的 README.md

### 场景 4: 项目管理策略变更

**触发**: 修改 javis_projects/ 下的项目组织方式

**检查项**:
- `javis_projects/README.md` - 更新说明文档
- `JARVIS.md` - 同步架构描述
- `workspace/.gitignore` - 检查忽略规则
- 可能的脚本配置

## 更新流程

1. **变更前评估**: 在进行架构变更前，先识别可能受影响的文档
2. **执行变更**: 完成实际的目录/文件操作
3. **批量更新**: 使用搜索工具找到所有陈旧引用
4. **验证检查**: 读取更新的文档，确认引用正确
5. **提交记录**: 将变更和文档更新一起提交

## 搜索命令示例

使用 Grep 工具搜索陈旧引用：

```bash
# 搜索特定路径
grep -r "旧路径" workspace/

# 搜索文件名
grep -r "旧文件名.md" workspace/

# 搜索目录名
grep -r "旧目录名" workspace/
```

## 历史记录

### 2026-01-31 - 初始建立

- 创建陈旧知识更新规则文档
- 建立自动更新触发条件清单
- 定义常见更新场景和检查流程

---
*最后更新: 2026-01-31*
